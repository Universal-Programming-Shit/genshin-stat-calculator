import{b as A,s as U,o as _,c as f,F as P,j as k,t as M,f as o,_ as E,i as b,g as I,r as h,w,v as q,m as N,e as S,x as J,y as K,z as Q,A as W}from"./index.7e18aaef.js";import{S as R,t as T,a as X,s as Y,i as H,b as x,m as Z}from"./ArtifactStore.b8cdf801.js";const ee=["value"],le=["value","selected","hidden"],ae=A({props:{modelValue:null,substats:null},emits:["update:modelValue"],setup(t,{emit:y}){const e=t;function d(l){var a;const s=(a=l.target)==null?void 0:a.value;s&&r(s)}const r=l=>y("update:modelValue",l);return U(e,()=>{var l;(!e.modelValue||!e.substats.includes(e.modelValue))&&r((l=e.substats[0])!=null?l:R.NONE)}),(l,s)=>(_(),f("select",{value:t.modelValue,class:"select",onChange:d},[(_(!0),f(P,null,k(t.substats,a=>(_(),f("option",{key:a,value:a,selected:t.modelValue===a,hidden:t.modelValue===a},M(o(T)(a)),9,le))),128))],40,ee))}}),te=["value","disabled","max"],se=A({props:{modelValue:null,maxRolls:null},emits:["update:modelValue"],setup(t,{emit:y}){const e=t;function d(l){var a;const s=(a=l.target)==null?void 0:a.value;s&&r(Number.parseInt(s,10))}const r=l=>y("update:modelValue",Math.max(l,0));return U(e,()=>{e.modelValue||r(Math.min(e.maxRolls,e.modelValue))},{immediate:!0}),(l,s)=>(_(),f("input",{value:e.modelValue,disabled:t.maxRolls<=0&&!t.modelValue,type:"range",step:1,min:0,max:t.maxRolls+t.modelValue,onInput:d},null,40,te))}});const ue=["value","selected"],oe=A({props:{modelValue:null,rollAmount:null,isPercentage:{type:Boolean},rollValue:null},emits:["update:modelValue"],setup(t,{emit:y}){const e=t;function d(u){var v;const p=(v=u.target)==null?void 0:v.value;p&&r(s.value[p])}const r=u=>y("update:modelValue",u),l=[[[0]],[[.7],[.8],[.9],[1]],[[.7,.7],[.7,.8],[.7,.9],[.7,1],[.8,1],[.9,1],[1,1]],[[.7,.7,.7],[.7,.7,.8],[.7,.7,.9],[.7,.7,1],[.7,.8,1],[.7,.9,1],[.7,1,1],[.8,1,1],[.9,1,1],[1,1,1]],[[.7,.7,.7,.7],[.7,.7,.7,.8],[.7,.7,.7,.9],[.7,.7,.7,1],[.7,.7,.8,1],[.7,.7,.9,1],[.7,.7,1,1],[.7,.8,1,1],[.7,.9,1,1],[.7,1,1,1],[.8,1,1,1],[.9,1,1,1],[1,1,1,1]],[[.7,.7,.7,.7,.7],[.7,.7,.7,.7,.8],[.7,.7,.7,.7,.9],[.7,.7,.7,.7,1],[.7,.7,.7,.8,1],[.7,.7,.7,.9,1],[.7,.7,.7,1,1],[.7,.7,.8,1,1],[.7,.7,.9,1,1],[.7,.7,1,1,1],[.7,.8,1,1,1],[.7,.9,1,1,1],[.7,1,1,1,1],[.8,1,1,1,1],[.9,1,1,1,1],[1,1,1,1,1]],[[.7,.7,.7,.7,.7,.7],[.7,.7,.7,.7,.7,.8],[.7,.7,.7,.7,.7,.9],[.7,.7,.7,.7,.7,1],[.7,.7,.7,.7,.8,1],[.7,.7,.7,.7,.9,1],[.7,.7,.7,.7,1,1],[.7,.7,.7,.8,1,1],[.7,.7,.7,.9,1,1],[.7,.7,.7,1,1,1],[.7,.7,.8,1,1,1],[.7,.7,.9,1,1,1],[.7,.7,1,1,1,1],[.7,.8,1,1,1,1],[.7,.9,1,1,1,1],[.7,1,1,1,1,1],[.8,1,1,1,1,1],[.9,1,1,1,1,1],[1,1,1,1,1,1]]],s=b(()=>I(l,e.rollAmount)),a=h(e.modelValue?s.value.indexOf(e.modelValue):0),i=u=>u.map(p=>p*e.rollValue).reduce(X,0);return U(e,()=>{if(e.modelValue===void 0)a.value=0,r(s.value[0]);else if(e.rollAmount!==e.modelValue.length||e.rollAmount!==e.modelValue.filter(u=>u).length){const u=I(l,e.modelValue.length),p=a.value/(u.length-1),v=I(l,e.rollAmount),m=Math.round(p*(v.length-1)),V=I(v,m);a.value=m,r(V)}},{immediate:!0}),(u,p)=>w((_(),f("select",{"onUpdate:modelValue":p[0]||(p[0]=v=>a.value=v),class:"sub-stat-value-selection",onInput:d},[(_(!0),f(P,null,k(o(s),(v,m)=>(_(),f("option",{key:m,value:m,selected:a.value===m},M(t.isPercentage?(i(v)*100).toFixed(2):i(v).toFixed(0))+M(t.isPercentage?"%":""),9,ue))),128))],544)),[[q,a.value]])}});var ne=E(oe,[["__scopeId","data-v-68e8ac4a"]]);const re={class:"row"},ve=A({props:{modelValue:null,stars:null,availableSubStats:null,availableRolls:null,baseRolls:{type:Boolean}},emits:["update:modelValue"],setup(t,{emit:y}){var i,u;const e=t,d=b(()=>[...e.baseRolls?e.availableSubStats:[R.NONE]]),r=h(e.modelValue.type),l=h((u=(i=e.modelValue.rolls)==null?void 0:i.length)!=null?u:0),s=h([0]),a=b(()=>{var p,v;return(v=(p=Y[e.stars])==null?void 0:p[r.value])!=null?v:0});return U([r,s,l],()=>{if(!e.baseRolls){y("update:modelValue",{type:R.NONE,rolls:[]});return}y("update:modelValue",{type:r.value,rolls:s.value})}),(p,v)=>(_(),f("div",re,[N(ae,{modelValue:r.value,"onUpdate:modelValue":v[0]||(v[0]=m=>r.value=m),substats:o(d)},null,8,["modelValue","substats"]),N(se,{modelValue:l.value,"onUpdate:modelValue":v[1]||(v[1]=m=>l.value=m),"max-rolls":t.baseRolls?t.availableRolls:0},null,8,["modelValue","max-rolls"]),N(ne,{modelValue:s.value,"onUpdate:modelValue":v[2]||(v[2]=m=>s.value=m),"is-percentage":o(H)(r.value),"roll-amount":t.baseRolls?l.value+1:0,"roll-value":o(a)},null,8,["modelValue","is-percentage","roll-amount","roll-value"])]))}});var O=E(ve,[["__scopeId","data-v-564b00ed"]]);const ie=K(" More rolls "),de=["disabled"],ce={class:"substat-container"},me=A({props:{modelValue:null,stars:null,level:null,availableSubStats:null},emits:["update:modelValue"],setup(t,{emit:y}){var C,B,F,L;const e=t,d=h(!1),r=b(()=>Math.max(e.stars-2,0)+(d.value?1:0)+Math.floor(e.level/4));function l(n){return n.rolls.filter(g=>g!==0).length}const s=h((C=e.modelValue[0])!=null?C:{type:R.NONE,rolls:[]}),a=h((B=e.modelValue[1])!=null?B:{type:R.NONE,rolls:[]}),i=h((F=e.modelValue[2])!=null?F:{type:R.NONE,rolls:[]}),u=h((L=e.modelValue[3])!=null?L:{type:R.NONE,rolls:[]});U([s,a,i,u],()=>{u.value.type!==R.NONE&&(u.value.type===s.value.type||u.value.type===a.value.type||u.value.type===i.value.type)&&(u.value.type=e.availableSubStats.filter(n=>n!==s.value.type&&n!==a.value.type&&n!==i.value.type)[0]),i.value.type!==R.NONE&&(i.value.type===s.value.type||i.value.type===a.value.type)&&(i.value.type=e.availableSubStats.filter(n=>n!==s.value.type&&n!==a.value.type&&n!==u.value.type)[0]),a.value.type!==R.NONE&&a.value.type===s.value.type&&(a.value.type=e.availableSubStats.filter(n=>n!==s.value.type&&n!==i.value.type&&n!==u.value.type)[0]),y("update:modelValue",[s.value,a.value,i.value,u.value])});const p=b(()=>e.stars>=3||e.stars===2&&d.value||r.value>0),v=b(()=>e.stars>=4||e.stars===3&&d.value||r.value-(p.value?1:0)>0),m=b(()=>e.stars>=5||e.stars===4&&d.value||r.value-(p.value?1:0)-(v.value?1:0)>0),V=b(()=>e.stars===5&&d.value||r.value-(p.value?1:0)-(v.value?1:0)-(m.value?1:0)>0),c=b(()=>Math.max(r.value-l(s.value)-l(a.value)-l(i.value)-l(u.value),0)),D=b(()=>e.availableSubStats.filter(n=>n!==a.value.type&&n!==i.value.type&&n!==u.value.type)),j=b(()=>e.availableSubStats.filter(n=>n!==s.value.type&&n!==i.value.type&&n!==u.value.type)),z=b(()=>e.availableSubStats.filter(n=>n!==a.value.type&&n!==s.value.type&&n!==u.value.type)),G=b(()=>e.availableSubStats.filter(n=>n!==a.value.type&&n!==i.value.type&&n!==s.value.type));return(n,g)=>(_(),f("div",null,[S("div",null,[S("label",null,[ie,w(S("input",{"onUpdate:modelValue":g[0]||(g[0]=$=>d.value=$),type:"checkbox",disabled:t.stars===1},null,8,de),[[J,d.value]])])]),S("div",ce,[N(O,{modelValue:s.value,"onUpdate:modelValue":g[1]||(g[1]=$=>s.value=$),stars:t.stars,"base-rolls":o(p),"available-rolls":o(c),"available-sub-stats":o(D)},null,8,["modelValue","stars","base-rolls","available-rolls","available-sub-stats"]),N(O,{modelValue:a.value,"onUpdate:modelValue":g[2]||(g[2]=$=>a.value=$),stars:t.stars,"base-rolls":o(v),"available-rolls":o(c),"available-sub-stats":o(j)},null,8,["modelValue","stars","base-rolls","available-rolls","available-sub-stats"]),N(O,{modelValue:i.value,"onUpdate:modelValue":g[3]||(g[3]=$=>i.value=$),stars:t.stars,"base-rolls":o(m),"available-rolls":o(c),"available-sub-stats":o(z)},null,8,["modelValue","stars","base-rolls","available-rolls","available-sub-stats"]),N(O,{modelValue:u.value,"onUpdate:modelValue":g[4]||(g[4]=$=>u.value=$),stars:t.stars,"base-rolls":o(V),"available-rolls":o(c),"available-sub-stats":o(G)},null,8,["modelValue","stars","base-rolls","available-rolls","available-sub-stats"])])]))}});var pe=E(me,[["__scopeId","data-v-8fe1c6fc"]]);const be=["value"],Ve=["value"],Se=["value"],ye=["value"],_e=["value"],fe=["value"],ge=A({props:{modelValue:null},emits:["update:modelValue"],setup(t,{emit:y}){function e(d){var l;const r=(l=d.target)==null?void 0:l.value;r&&y("update:modelValue",r)}return(d,r)=>(_(),f("select",{value:t.modelValue,class:"star-selection",onChange:e},[S("option",{value:o(x).S5},"5 Star",8,Ve),S("option",{value:o(x).S4},"4 Star",8,Se),S("option",{value:o(x).S3},"3 Star",8,ye),S("option",{value:o(x).S2},"2 Star",8,_e),S("option",{value:o(x).S1},"1 Star",8,fe)],40,be))}});var xe=E(ge,[["__scopeId","data-v-96121f54"]]);const he=A({props:{modelValue:null,isPerc:{type:Boolean}},setup(t){return(y,e)=>(_(),f("div",null,M(t.isPerc?(t.modelValue*100).toFixed(2):t.modelValue.toFixed(0))+M(t.isPerc?"%":""),1))}});var Re=E(he,[["__scopeId","data-v-167b218a"]]);const Ne={class:"artifact-container"},$e={class:"artifact-selection artifact-options"},Me={class:"artifact-options"},Ae={class:"inset"},Ue=["max"],Ee={class:"artifact-options"},Ie=["disabled"],Oe=["value","selected"],we={class:"artifact-options"},Pe=A({props:{type:null,availableMainStats:null,availableSubStats:null},emits:["artifact"],setup(t,{emit:y}){const e=t,d=h("0");function r(){l.value.level=Number.parseInt(d.value,10)}const l=h({type:e.type,level:1,stars:x.S5,mainStat:e.availableMainStats[0],subStats:[]});U(l.value,()=>y("artifact",l.value));const s=b(()=>l.value.level),a=b(()=>l.value.stars),i=b(()=>l.value.mainStat),u=b(()=>{switch(a.value){case x.S1:return 4;case x.S2:return 8;case x.S3:return 12;case x.S4:return 16;case x.S5:return 20;default:return 4}});U(u,()=>{u.value<Number.parseInt(d.value,10)&&(d.value=`${u.value}`,l.value.level=u.value)});const p=b(()=>H(i.value)),v=b(()=>{var m,V,c;return(c=(V=(m=Z[a.value])==null?void 0:m[i.value])==null?void 0:V.call(m,s.value))!=null?c:0});return(m,V)=>(_(),f("div",Ne,[S("div",$e,[S("div",null,M(t.type),1),N(xe,{modelValue:l.value.stars,"onUpdate:modelValue":V[0]||(V[0]=c=>l.value.stars=c)},null,8,["modelValue"])]),S("div",Me,[S("div",Ae,"Level: "+M(o(s)),1),w(S("input",{"onUpdate:modelValue":V[1]||(V[1]=c=>d.value=c),type:"range",min:"1",max:o(u),onInput:r},null,40,Ue),[[Q,d.value]])]),S("div",Ee,[w(S("select",{"onUpdate:modelValue":V[2]||(V[2]=c=>l.value.mainStat=c),class:"inset",disabled:e.availableMainStats.length<=1},[(_(!0),f(P,null,k(e.availableMainStats,c=>(_(),f("option",{key:c,value:c,selected:o(i)===c},M(o(T)(c)),9,Oe))),128))],8,Ie),[[q,l.value.mainStat]]),N(Re,{modelValue:o(v),"onUpdate:modelValue":V[3]||(V[3]=c=>W(v)?v.value=c:null),"is-perc":o(p)},null,8,["modelValue","is-perc"])]),S("div",we,[N(pe,{modelValue:l.value.subStats,"onUpdate:modelValue":V[4]||(V[4]=c=>l.value.subStats=c),class:"inset",level:o(s),stars:o(a),"available-sub-stats":t.availableSubStats.filter(c=>c!==o(i))},null,8,["modelValue","level","stars","available-sub-stats"])])]))}});var Be=E(Pe,[["__scopeId","data-v-7857defa"]]);export{Be as A};
